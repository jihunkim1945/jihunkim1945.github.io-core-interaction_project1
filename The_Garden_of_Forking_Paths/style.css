@font-face{
  font-family: "Whyte";
  src: url("../assets/fonts/ABCWhyteMonoInktrapVariable-Trial.ttf") format("truetype");
  font-weight: 100, 900;
  font-style: normal;
  font-display: swap;
}

:root{
  --bg:#0b0b0b;
  --fg:#f2f2f2;
}

*{ box-sizing:border-box; }
html,body{ height:100%; }

body{
  margin:0;
  background: var(--bg);
  color: var(--fg);
  font-family:"Whyte", ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
  overflow: hidden; /* 인트로 끝나기 전엔 스크롤 막음 */
  font-stretch: 100%;       /* ✅ 늘어짐 방지 */
  font-kerning: normal;
  font-synthesis: none;
  -webkit-text-size-adjust: 100%;
  text-rendering: geometricPrecision;

}

/* =========================
   HOME DOOR (random pos)
========================= */
.wakeDoor{
  position: fixed;
  z-index: 9999;
  left: var(--x, 82%);
  top: var(--y, 18%);
  width: 56px;
}
.wakeDoor img{
  width:100%;
  display:block;
  opacity:.85;
}
.wakeDoor:hover img{
  animation: doorShake .35s ease-in-out infinite;
}
@keyframes doorShake{
  0%{ transform:translateX(0) rotate(0deg); }
  25%{ transform:translateX(-2px) rotate(-2deg); }
  50%{ transform:translateX(2px) rotate(2deg); }
  75%{ transform:translateX(-2px) rotate(-2deg); }
  100%{ transform:translateX(0) rotate(0deg); }
}

/* =========================
   INTRO (loading scene)
========================= */
.intro{
  position: fixed;
  inset:0;
  z-index: 5000;
  background:#000;
  display:flex;
  align-items:center;
  justify-content:center;
  flex-direction:column;
  gap:18px;
}

.intro__gif{
  position:absolute;
  inset:0;
  width:100%;
  height:100%;
  object-fit: cover;
  display:block;
  filter: contrast(1.1);
}

.intro__title{
  position: relative;
  z-index: 2;
  font-size: clamp(36px, 5.5vw, 84px);
  white-space: nowrap;
  letter-spacing: .01em;
  text-align:center;
  padding: 0 5vw;
  text-shadow: 0 0 14px rgba(255,255,255,.12);
}

.intro__choices{
  position: absolute;
  left: 0;
  right: 0;
  bottom: 26px;
  z-index: 2;
  display:flex;
  justify-content:center;
  gap: 18px;
}

.intro__choice{
  background: transparent;
  border: 0;
  color: rgba(255,255,255,.82);
  font: inherit;
  font-size: 12px;
  letter-spacing: .18em;
  padding: 6px 4px;
  cursor: pointer;
  transform: translateY(0);
  transition: transform .18s ease, color .18s ease;
  position: relative;
}
.intro__choice::after{
  content:"";
  position:absolute;
  left:0; right:0;
  bottom:-3px;
  height:1px;
  background: currentColor;
  transform: scaleX(0);
  transform-origin: left;
  transition: transform .18s ease;
  opacity: .9;
}
.intro__choice:hover{
  color:#fff;
  transform: translateY(-2px);
}
.intro__choice:hover::after{
  transform: scaleX(1);
}

.intro.isOff{
  opacity:0;
  visibility:hidden;
  transition: opacity .6s ease, visibility .6s ease;
}

/* =========================
   SCROLLER + SCENES (snap)
========================= */
.scroller{
  height: 100vh;
  overflow-y: hidden;        /* JS에서 시작 후 auto로 바꿈 */
  scroll-snap-type: y mandatory;
  scroll-behavior: smooth;
}

.scene{
  position: relative;
  height: 100vh;
  width: 100%;
  scroll-snap-align: start;
  overflow: hidden;
}

/* scene bg img */
.scene__bg{
  position:absolute;
  inset:0;
  width:100%;
  height:100%;
  object-fit:cover;
  z-index:1;
}

/* SVG reveal layer */
.revealSvg{
  position:absolute;
  inset:0;
  width:100%;
  height:100%;
  z-index:10;
  pointer-events:auto;
}

/* =========================
   REVEAL TEXT (4 columns)
   - foreignObject 안의 div에 적용됨
========================= */
.revealText{
  width: 100%;
  height: 100%;
  padding: 7vh 6vw 14vh;
  box-sizing: border-box;
  pointer-events: none; /* mouse는 svg가 받게 */
  color: #fff;

  /* ✅ 4칼럼 고정 */
  column-count: 4;
  column-gap: 40px;

  /* ✅ 너무 얇아지면 글자 세로 깨짐 방지 */
  column-width: 260px;

  font-size: 15px;
  line-height: 1.75;
  letter-spacing: .02em;

  /* foreignObject 렌더링 안정 */
  -webkit-font-smoothing: antialiased;
  text-rendering: geometricPrecision;
}

.revealText p{
  margin: 0 0 1.2em;
  break-inside: avoid;
}

/* =========================
   CHOICES (bottom text only)
========================= */
.choiceBar{
  position: absolute;
  left: 0; right: 0;
  bottom: 24px;
  display: flex;
  justify-content: center;
  gap: 26px;
  z-index: 30;          /* svg 위로 */
  pointer-events: auto;
}

.choice{
  background: transparent;
  border: 0;
  color: rgba(255,255,255,.82);
  font: inherit;
  font-size: 12px;
  letter-spacing: .16em;
  text-transform: uppercase;
  padding: 6px 2px;
  cursor: pointer;
  transform: translateY(0);
  transition: transform .18s ease, color .18s ease;
  position: relative;
}

.choice::after{
  content:"";
  position:absolute;
  left:0; right:0;
  bottom:-3px;
  height:1px;
  background: currentColor;
  transform: scaleX(0);
  transform-origin: left;
  transition: transform .18s ease;
  opacity: .9;
}

.choice:hover{
  color:#fff;
  transform: translateY(-2px);
}
.choice:hover::after{
  transform: scaleX(1);
}
.revealText{
  column-fill: auto;   /* 중요: 넘침 방지 */
}
/* 기본은 숨김 */
.choiceBar{ opacity:0; pointer-events:none; transition: opacity .25s ease; }
/* 3초 뒤 이 클래스 붙이면 보임 */
.choiceBar.isOn{ opacity:1; pointer-events:auto; }
